<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="edu">
	<select id="findListRegReq" resultType="map">
	
    SELECT *
      FROM ITEM_REG_REQ IRR                
     WHERE 
     	IRR.TEN_ID = #{g.tenant}

       <if test='p.from_reg_dt != null and p.from_reg_dt != ""'>
       AND IRR.REG_DTTM &gt; #{p.from_reg_dt}
       </if>
       <if test='p.to_reg_dt != null and p.to_reg_dt != ""'>
       AND IRR.REG_DTTM &lt; #{p.to_reg_dt}
       </if>
       
       <if test='p.reqr_id != null and p.reqr_id != ""'>
       AND IRR.REQR_ID &lt; #{p.reqr_id}
       </if>
       
		<if test="p.item_nm != null and p.item_nm != ''">
			<bind name="namePattern" value="'%' + p.item + '%'" />
			AND (UPPER(IRR.ITEM_NM_EN) LIKE UPPER(#{namePattern}) OR UPPER(IRR.ITEM_NM) LIKE UPPER(#{namePattern}))
		</if>
		
     ORDER BY IRR.ITEM_REG_REQ_NO
    </select>
    
    <select id="findListItemCat" resultType="map">
	
    SELECT *
      FROM ITEM_CAT                
     WHERE 
     	TEN_ID = #{g.tenant}
     	AND USE_YN = 'Y'

     ORDER BY SORT
    </select>
    
    

</mapper>